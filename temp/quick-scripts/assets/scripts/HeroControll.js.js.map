{"version":3,"sources":["HeroControll.js.ts"],"names":[],"mappings":";;;;AAAA,kEAAkE;AAElE,IAAM,SAAS,GAAG,CAAC,CAAC;AACpB,IAAM,UAAU,GAAG,CAAC,CAAC;AAErB,EAAE,CAAC,KAAK,CAAC,uBAAuB,GAAG,KAAK,CAAC;AAEzC,EAAE,CAAC,KAAK,CAAC;IACL,OAAO,EAAE,EAAE,CAAC,SAAS;IAErB,UAAU,EAAE;QACR,QAAQ,EAAE,GAAG;QACb,KAAK,EAAE,CAAC;QACR,YAAY,EAAE,IAAI;QAClB,SAAS,EAAE,GAAG;QACd,IAAI,EAAE,GAAG;KACZ;IAED,8BAA8B;IAC9B,MAAM,EAAE;QACJ,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,EAAE,CAAC,WAAW,CAAC,SAAS,CAAC,QAAQ,EAAE,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;QAC3E,EAAE,CAAC,WAAW,CAAC,EAAE,CAAC,EAAE,CAAC,WAAW,CAAC,SAAS,CAAC,MAAM,EAAE,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;QAEvE,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;QAEpB,IAAI,CAAC,GAAG,GAAG,KAAK,CAAC;QAEjB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,YAAY,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC;IAChD,CAAC;IAED,SAAS,YAAE,KAAK;QACZ,QAAO,KAAK,CAAC,OAAO,EAAE;YAClB,KAAK,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC;YACd,KAAK,EAAE,CAAC,GAAG,CAAC,IAAI;gBACZ,IAAI,CAAC,UAAU,IAAI,SAAS,CAAC;gBAC7B,MAAM;YACV,KAAK,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC;YACd,KAAK,EAAE,CAAC,GAAG,CAAC,KAAK;gBACb,IAAI,CAAC,UAAU,IAAI,UAAU,CAAC;gBAC9B,MAAM;YACV,KAAK,EAAE,CAAC,GAAG,CAAC,EAAE;gBACV,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;oBAClB,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC;iBACnB;gBACD,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;gBACvB,MAAM;SACb;IACL,CAAC;IAED,OAAO,YAAE,KAAK;QACV,QAAO,KAAK,CAAC,OAAO,EAAE;YAClB,KAAK,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC;YACd,KAAK,EAAE,CAAC,GAAG,CAAC,IAAI;gBACZ,IAAI,CAAC,UAAU,IAAI,CAAC,SAAS,CAAC;gBAC9B,MAAM;YACV,KAAK,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC;YACd,KAAK,EAAE,CAAC,GAAG,CAAC,KAAK;gBACb,IAAI,CAAC,UAAU,IAAI,CAAC,UAAU,CAAC;gBAC/B,MAAM;YACV,KAAK,EAAE,CAAC,GAAG,CAAC,EAAE;gBACV,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;gBACxB,MAAM;SACb;IACL,CAAC;IAGD,0EAA0E;IAC1E,MAAM,EAAE,UAAU,EAAE;QAChB,IAAI,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC;QAErC,IAAG,IAAI,CAAC,UAAU,KAAK,SAAS,EAAE;YAC9B,0BAA0B;YAE1B,IAAG,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;gBACrB,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC;aAC1B;YAED,KAAK,CAAC,CAAC,IAAI,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;YAClC,IAAG,KAAK,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,EAAE;gBACzB,KAAK,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC;aAC5B;SACJ;aACI,IAAI,IAAI,CAAC,UAAU,KAAK,UAAU,EAAE;YACrC,0BAA0B;YAE1B,IAAG,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;gBACrB,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC;aAC1B;YAED,KAAK,CAAC,CAAC,IAAI,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;YAClC,IAAG,KAAK,CAAC,CAAC,GAAG,IAAI,CAAC,QAAQ,EAAE;gBACxB,KAAK,CAAC,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC;aAC3B;SACJ;aACI;YACD,IAAG,KAAK,CAAC,CAAC,IAAI,CAAC,EAAE;gBACb,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC;gBACvB,IAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE;oBACvB,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC;oBACZ,0BAA0B;iBAC7B;qBAAM;oBACH,KAAK,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;iBACnC;aACJ;SACJ;QAED,IAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE;YACtB,IAAI,CAAC,KAAK,GAAK,CAAC,CAAC;SACpB;QAED,IAAI,IAAI,CAAC,KAAK,GAAG,CAAC,IAAI,IAAI,CAAC,GAAG,EAAE;YAC5B,KAAK,CAAC,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC;YACzB,IAAI,CAAC,KAAK,EAAE,CAAC;SAChB;QAED,IAAI,CAAC,GAAG,GAAG,KAAK,CAAC;QACjB,IAAI,CAAC,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;IACrC,CAAC;CACJ,CAAC,CAAC","file":"","sourceRoot":"../../../../assets/scripts","sourcesContent":["// game art from : https://openpixelproject.itch.io/opp2017sprites\n\nconst MOVE_LEFT = 1;\nconst MOVE_RIGHT = 2;\n\ncc.macro.ENABLE_TILEDMAP_CULLING = false;\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        maxSpeed: 500,\n        jumps: 2,\n        acceleration: 1500,\n        jumpSpeed: 200,\n        drag: 600\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\n\n        this._moveFlags = 0;\n\n        this._up = false;\n        \n        this.body = this.getComponent(cc.RigidBody);\n    },\n\n    onKeyDown (event) {\n        switch(event.keyCode) {\n            case cc.KEY.a:\n            case cc.KEY.left:\n                this._moveFlags |= MOVE_LEFT;\n                break;\n            case cc.KEY.d:\n            case cc.KEY.right:\n                this._moveFlags |= MOVE_RIGHT;\n                break;\n            case cc.KEY.up:\n                if (!this._upPressed) {\n                    this._up = true;\n                }\n                this._upPressed = true;\n                break;\n        }\n    },\n\n    onKeyUp (event) {\n        switch(event.keyCode) {\n            case cc.KEY.a:\n            case cc.KEY.left:\n                this._moveFlags &= ~MOVE_LEFT;\n                break;\n            case cc.KEY.d:\n            case cc.KEY.right:\n                this._moveFlags &= ~MOVE_RIGHT;\n                break;\n            case cc.KEY.up:\n                this._upPressed = false;\n                break;\n        }\n    },\n\n\n    // called every frame, uncomment this function to activate update callback\n    update: function (dt) {\n        var speed = this.body.linearVelocity;\n\n        if(this._moveFlags === MOVE_LEFT) {\n            // this.anim.play('walk');\n\n            if(this.node.scaleX > 0) {\n                this.node.scaleX *= -1;\n            }\n\n            speed.x -= this.acceleration * dt;\n            if(speed.x < -this.maxSpeed) {\n                speed.x = -this.maxSpeed;\n            }\n        } \n        else if (this._moveFlags === MOVE_RIGHT) {\n            // this.anim.play('walk');\n\n            if(this.node.scaleX < 0) {\n                this.node.scaleX *= -1;\n            }\n\n            speed.x += this.acceleration * dt;\n            if(speed.x > this.maxSpeed) {\n                speed.x = this.maxSpeed;\n            }\n        }  \n        else {\n            if(speed.x != 0) {\n                var d = this.drag * dt;\n                if(Math.abs(speed.x) <= d) {\n                    speed.x = 0;\n                    // this.anim.play('idle');\n                } else {\n                    speed.x -= speed.x > 0 ? d : -d;\n                }\n            }\n        }\n        \n        if(Math.abs(speed.y) < 1) {\n            this.jumps   = 2;\n        }\n\n        if (this.jumps > 0 && this._up) {\n            speed.y = this.jumpSpeed;\n            this.jumps--;\n        }\n\n        this._up = false;\n        this.body.linearVelocity = speed;\n    },\n});\n"]}